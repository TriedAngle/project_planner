<form [formGroup]="billForm" (ngSubmit)="onSubmitBill()">
  <div *ngIf="debug">
    Values: {{billForm.value | json}}
    <pre>{{billForm.get('amount').valid}}</pre>
    <pre>{{billForm.get('billBool').get('intake').valid}}</pre>
    <pre>{{billForm.get('billBool').get('digital').valid}}</pre>
    <pre>{{billForm.get('billBool').get('paid').valid}}</pre>
    <pre>{{billForm.get('date_order').valid}}</pre>
    <pre>{{billForm.get('date_paid').valid}}</pre>
    <pre>{{billForm.get('ordered_by').valid}}</pre>
    <pre>{{billForm.get('seller').valid}}</pre>
    <pre>Form: {{billForm.valid}}</pre>
  </div>

  <mat-form-field>
    <input matInput formControlName="amount" type="number" placeholder="Amount">
  </mat-form-field>
  <mat-form-field>
    <input matInput formControlName="project" type="text" placeholder="Project">
  </mat-form-field>
  <div formGroupName="billBool" style="left: 20%">
    <mat-checkbox formControlName="intake">Intake</mat-checkbox>
    <mat-checkbox formControlName="digital">Digital</mat-checkbox>
    <mat-checkbox formControlName="paid">Paid</mat-checkbox>
  </div>
  <mat-form-field>
    <input [matDatepicker]="date_order_date_picker" formControlName="date_order" matInput placeholder="Date of Order">
    <mat-datepicker-toggle matSuffix [for]="date_order_date_picker"></mat-datepicker-toggle>
    <mat-datepicker #date_order_date_picker></mat-datepicker>
  </mat-form-field>
  <mat-form-field>
    <input [matDatepicker]="date_paid_date_picker" matInput formControlName="date_paid" placeholder="Date of Payment">
    <mat-datepicker-toggle matSuffix [for]="date_paid_date_picker"></mat-datepicker-toggle>
    <mat-datepicker #date_paid_date_picker></mat-datepicker>
  </mat-form-field>
  <mat-form-field>
    <input matInput formControlName="ordered_by" placeholder="Buyer">
  </mat-form-field>
  <mat-form-field>
    <input matInput formControlName="seller" placeholder="Seller">
  </mat-form-field>
  <br>

  <mat-grid-list cols="3" rowHeight="1:1.2">
    <mat-grid-tile colspan="2">

      <perfect-scrollbar formArrayName="products">
        <div *ngFor="let product of productForms.controls; let i = index" [formGroupName]="i">
          <mat-form-field>
            <input matInput type="text" formControlName="name" placeholder="Product Name">
          </mat-form-field>
          <mat-form-field>
            <input matInput type="number" formControlName="amount" placeholder="Amount">
          </mat-form-field>
          <button mat-raised-button color="warn" (click)="deleteProduct(i)">Delete</button>
          <mat-divider></mat-divider>
        </div>
      </perfect-scrollbar>
    </mat-grid-tile>

    <mat-grid-tile class="btn-group">
      <button mat-raised-button color="primary" (click)="addProduct()">Add Product</button>

    </mat-grid-tile>
  </mat-grid-list>
  <button mat-raised-button color="primary" type="submit" [disabled]="billForm.invalid" style="left: 75%">Submit</button>

</form>

